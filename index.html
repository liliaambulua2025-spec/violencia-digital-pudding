<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>El eco del ciberbullying - Scrollytelling</title>
<meta name="description" content="Investigación periodística de datos sobre ciberbullying en la pandemia de 2020">
<style>
/* --- Variables y tipografía --- */
:root{
  --bg:#fbfbfc; 
  --text:#111827; 
  --muted:#6b7280; 
  --accent:#6d28d9;
  font-family:'Inter', sans-serif;
}
body{
  margin:0; 
  background:var(--bg); 
  color:var(--text); 
  overflow-x:hidden;
}
/* --- Contenedor de visualización fija --- */
.viz-container{
  position:fixed;
  top:20px;
  right:20px;
  width:45%;
  height:90vh;
  border-radius:12px;
  overflow:hidden;
  background:#fff;
  box-shadow:0 12px 36px rgba(0,0,0,0.1);
  z-index:10;
}
.viz-container iframe, .viz-container img{
  width:100%;
  height:100%;
  object-fit:contain;
}

/* --- Secciones de scroll --- */
.section{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:flex-start;
  padding:0 8%;
  box-sizing:border-box;
}
.panel{
  max-width:600px;
  opacity:0;
  transform: translateY(40px);
  transition: all 0.9s ease-out;
}
.panel.visible{
  opacity:1;
  transform: translateY(0);
}
h1{
  font-size:clamp(24px,3vw,36px);
  margin-bottom:12px;
}
p{
  font-size:16px;
  line-height:1.6;
  color:#4b5563;
}
.caption{
  font-size:14px;
  color:#6b7280;
  margin-top:12px;
}

/* --- Menu lateral --- */
.menu{
  position:fixed;
  top:50%;
  left:20px;
  transform:translateY(-50%);
  display:flex;
  flex-direction:column;
  gap:12px;
  z-index:15;
}
.menu a{
  text-decoration:none;
  color:var(--accent);
  font-weight:600;
  font-size:14px;
}

/* --- Responsive --- */
@media(max-width:1024px){
  .viz-container{
    width:90%;
    left:50%;
    top:10px;
    transform:translateX(-50%);
  }
  .section{
    justify-content:center;
    text-align:center;
    padding:0 5%;
  }
}
</style>
</head>
<body>

<!-- Menu lateral -->
<div class="menu">
  <a href="#volumen">Volumen</a>
  <a href="#porcentajes">Porcentajes</a>
  <a href="#nube-global">Nube global</a>
  <a href="#nube-tipo">Nube por tipo</a>
  <a href="#longitud">Longitud y palabras clave</a>
  <a href="#conclusion">Conclusión</a>
</div>

<!-- Contenedor de visualización -->
<div class="viz-container" id="viz-container">
  <iframe src="https://public.tableau.com/views/observatorio_17621986227370/Hoja1?:embed=y&:display_count=yes&:showVizHome=no" frameborder="0"></iframe>
</div>

<!-- Secciones de scroll -->
<section class="section" id="volumen" data-viz="observatorio">
  <div class="panel">
    <h1>Volumen del ciberbullying en 2020</h1>
    <p>Cantidad total de tweets y distribución por tipo de ciberacoso durante la pandemia.</p>
  </div>
</section>

<section class="section" id="porcentajes" data-viz="porcentajes">
  <div class="panel">
    <h1>Tipos de acoso más comunes</h1>
    <p>Porcentaje por tipo de ciberbullying. La apariencia física y el género son las categorías predominantes.</p>
  </div>
</section>

<section class="section" id="nube-global" data-viz="nube-global">
  <div class="panel">
    <h1>Lenguaje del acoso</h1>
    <p>Nube de palabras global para identificar términos recurrentes en los ataques.</p>
  </div>
</section>

<section class="section" id="nube-tipo" data-viz="nube-tipo">
  <div class="panel">
    <h1>Nube de palabras por tipo</h1>
    <p>Visualización por categoría de ciberacoso.</p>
  </div>
</section>

<section class="section" id="longitud" data-viz="longitud">
  <div class="panel">
    <h1>Longitud y palabras clave</h1>
    <p>Promedio de longitud de los textos y palabras más usadas según tipo de ciberbullying.</p>
  </div>
</section>

<section class="section" id="conclusion" data-viz="conclusion">
  <div class="panel">
    <h1>Conclusión</h1>
    <p>Los datos muestran patrones y desigualdades sociales. Esto permite diseñar estrategias de educación digital y acompañamiento emocional.</p>
  </div>
</section>

<script>
// Mapa de visualizaciones
const vizMap = {
  "observatorio":"https://public.tableau.com/views/observatorio_17621986227370/Hoja1?:embed=y&:display_count=yes&:showVizHome=no",
  "porcentajes":"https://public.tableau.com/views/GraficoportipodeCiberbullying/Hoja3?:embed=y&:display_count=yes&:showVizHome=no",
  "nube-global":"images/nube_palabras_global.png",
  "nube-tipo":"images/nube_palabras_por_tipo.png",
  "longitud":"https://public.tableau.com/views/GraficoLongituddeltextoportipodeciberbullying/Hoja4?:embed=y&:display_count=yes&:showVizHome=no",
  "conclusion":"images/conclusion.png"
};

// Contenedor de visualización
const vizContainer = document.getElementById('viz-container');
const sections = document.querySelectorAll('.section');

// Animar paneles y cambiar visualización
const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.querySelector('.panel').classList.add('visible');
      const vizKey = entry.target.dataset.viz;
      if(vizMap[vizKey]){
        if(vizMap[vizKey].endsWith(".png")){
          vizContainer.innerHTML = `<img src="${vizMap[vizKey]}" alt="${vizKey}">`;
        } else {
          vizContainer.innerHTML = `<iframe src="${vizMap[vizKey]}" frameborder="0"></iframe>`;
        }
      }
    }
  });
},{threshold:0.4});

sections.forEach(s => observer.observe(s));
</script>
</body>
</html>
