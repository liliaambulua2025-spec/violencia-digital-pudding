<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>El eco del ciberbullying 2020 - Interactivo</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/ScrollTrigger.min.js"></script>
  <style>
    body {margin:0; font-family: 'Inter', sans-serif; background:#fbfbfc; color:#111827;}
    .wrap{max-width:900px; margin:0 auto; padding:40px 20px;}
    h1, h2{margin:0 0 20px;}
    .section{margin:80px 0; opacity:0; transform:translateY(50px);}
    .panel{background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.05);}
    .viz{margin:20px 0; height:400px; background:#fafafa; border-radius:8px; display:flex; justify-content:center; align-items:center;}
    .number{font-size:48px; font-weight:700; color:#6d28d9;}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Título / Introducción -->
    <section class="section">
      <div class="panel">
        <h1>El eco del ciberbullying durante la pandemia 2020</h1>
        <p>Durante el confinamiento, la violencia digital se intensificó en redes sociales. Este proyecto analiza 47.000 tweets para visibilizar cómo se manifestó el ciberacoso.</p>
      </div>
    </section>

    <!-- Sección de números animados -->
    <section class="section">
      <div class="panel">
        <h2>Cantidad de tweets</h2>
        <div class="number" data-target="47000">0</div>
        <p>Tweets analizados según tipo de ciberacoso.</p>
      </div>
    </section>

    <!-- Sección de nube de palabras -->
    <section class="section">
      <div class="panel">
        <h2>Nube de palabras global</h2>
        <div id="wordcloud" class="viz">[Aquí irá la nube interactiva]</div>
      </div>
    </section>

    <!-- Sección de gráfico (iframe Tableau) -->
    <section class="section">
      <div class="panel">
        <h2>Distribución por tipo</h2>
        <div class="viz">
          <iframe src="https://public.tableau.com/views/GraficoportipodeCiberbullying/Hoja3?:embed=y&:display_count=yes&:showVizHome=no" width="100%" height="400" frameborder="0"></iframe>
        </div>
      </div>
    </section>

  </div>

  <script>
    // GSAP reveal
    gsap.utils.toArray('.section').forEach(section => {
      gsap.to(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 80%",
          toggleActions: "play none none reverse"
        },
        duration: 1,
        opacity:1,
        y:0
      });
    });

    // Animación de números
    const numbers = document.querySelectorAll('.number');
    numbers.forEach(num => {
      const target = +num.getAttribute('data-target');
      gsap.fromTo(num, {innerText:0}, {
        innerText: target,
        duration:2,
        snap:{innerText:1},
        scrollTrigger:{
          trigger:num,
          start:"top 90%",
        }
      });
    });

    // Nube de palabras simple
    const words = ["acoso", "genero", "apariencia", "insulto", "edad", "humor", "redes", "pandemia"];
    const cloud = document.getElementById('wordcloud');
    words.forEach(word => {
      const span = document.createElement('span');
      span.textContent = word;
      span.style.fontSize = (12 + Math.random()*36) + "px";
      span.style.margin = "5px";
      span.style.color = "#6d28d9";
      cloud.appendChild(span);
    });
  </script>
</body>
</html>
